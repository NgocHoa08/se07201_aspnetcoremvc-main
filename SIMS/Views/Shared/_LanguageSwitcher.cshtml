@using Microsoft.AspNetCore.Localization
@inject SIMS.Services.LanguageService LanguageService

@{
    var currentCulture = LanguageService.GetCurrentLanguage();
    var returnUrl = Context.Request.Path + Context.Request.QueryString;
}

<div class="dropdown">
    <button class="btn btn-outline-light dropdown-toggle" type="button"
            id="languageDropdown" data-bs-toggle="dropdown" aria-expanded="false">
        @if (currentCulture == "vi")
        {
            <i class="fas fa-flag me-1"></i>
            <span>Tiếng Việt</span>
        }
        else
        {
            <i class="fas fa-flag-usa me-1"></i>
            <span>English</span>
        }
    </button>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="languageDropdown">
        <li>
            <form asp-controller="Language" asp-action="ChangeLanguage" method="post" class="dropdown-item p-0">
                <input type="hidden" name="culture" value="en" />
                <input type="hidden" name="returnUrl" value="@returnUrl" />
                <button type="submit" class="btn btn-link text-decoration-none text-dark w-100 text-start px-3 py-2">
                    <i class="fas fa-flag-usa me-2"></i>English
                    @if (currentCulture == "en")
                    {
                        <i class="fas fa-check text-success float-end"></i>
                    }
                </button>
            </form>
        </li>
        <li><hr class="dropdown-divider"></li>
        <li>
            <form asp-controller="Language" asp-action="ChangeLanguage" method="post" class="dropdown-item p-0">
                <input type="hidden" name="culture" value="vi" />
                <input type="hidden" name="returnUrl" value="@returnUrl" />
                <button type="submit" class="btn btn-link text-decoration-none text-dark w-100 text-start px-3 py-2">
                    <i class="fas fa-flag me-2"></i>Tiếng Việt
                    @if (currentCulture == "vi")
                    {
                        <i class="fas fa-check text-success float-end"></i>
                    }
                </button>
            </form>
        </li>
    </ul>
</div>

<style>
    .dropdown-item button:hover {
        background-color: #f8f9fa;
    }
</style>